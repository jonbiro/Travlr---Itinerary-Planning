"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var react_1 = require("react");
var util_1 = require("../util");
var Img = (function (_super) {
    tslib_1.__extends(Img, _super);
    function Img() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.state = {
            state: 0
        };
        _this.onLoad = function (originalOnLoad) { return function (event) {
            _this.setState({ state: 1 });
            (originalOnLoad || util_1.noop)(event);
        }; };
        _this.onError = function (originalOnError) { return function (event) {
            _this.setState({ state: 2 });
            (originalOnError || util_1.noop)(event);
        }; };
        return _this;
    }
    Img.prototype.render = function () {
        var _a = this.props, renderLoad = _a.renderLoad, renderError = _a.renderError, onLoad = _a.onLoad, onError = _a.onError, $ref = _a.$ref, rest = tslib_1.__rest(_a, ["renderLoad", "renderError", "onLoad", "onError", "$ref"]);
        if (!util_1.isClient) {
            return util_1.h('img', rest);
        }
        rest.onLoad = this.onLoad(onLoad);
        rest.onError = this.onError(onError);
        if ($ref) {
            rest.ref = $ref;
        }
        var state = this.state.state;
        var img = util_1.h('img', rest);
        switch (state) {
            case 0:
                return renderLoad ? renderLoad(img, this.props, state) : img;
            case 1:
                return img;
            case 2:
                return renderError || renderLoad ?
                    (renderError || renderLoad)(img, this.props, state) :
                    img;
        }
    };
    return Img;
}(react_1.Component));
exports.Img = Img;
//# sourceMappingURL=index.js.map