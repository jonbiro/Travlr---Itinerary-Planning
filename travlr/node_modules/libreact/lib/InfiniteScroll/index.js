"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = tslib_1.__importStar(require("react"));
var ViewportScrollSensor_1 = require("../ViewportScrollSensor");
var h = React.createElement;
var defaultSentinel = h('div', { style: { width: 1, height: 1 } });
var InfiniteScroll = (function (_super) {
    tslib_1.__extends(InfiniteScroll, _super);
    function InfiniteScroll() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.lastLoadMoreCursor = null;
        _this.onViewportChange = function (_a) {
            var visible = _a.visible;
            if (visible) {
                if (_this.lastLoadMoreCursor !== _this.props.cursor) {
                    _this.lastLoadMoreCursor = _this.props.cursor;
                    _this.props.loadMore();
                }
            }
        };
        return _this;
    }
    InfiniteScroll.prototype.render = function () {
        var props = this.props;
        var children = props.children, hasMore = props.hasMore, sentinel = props.sentinel, margin = props.margin, poll = props.poll;
        return h(React.Fragment, null, children, hasMore &&
            h(ViewportScrollSensor_1.ViewportScrollSensor, { margin: [0, 0, margin, 0], poll: poll, onChange: this.onViewportChange }, sentinel));
    };
    InfiniteScroll.defaultProps = {
        sentinel: defaultSentinel,
        hasMore: true,
        margin: 100,
    };
    return InfiniteScroll;
}(React.Component));
exports.InfiniteScroll = InfiniteScroll;
//# sourceMappingURL=index.js.map