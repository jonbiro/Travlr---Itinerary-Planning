"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var React = tslib_1.__importStar(require("react"));
var util_1 = require("./util");
var ViewportSensor_1 = require("./ViewportSensor");
var pixel_1 = require("./pixel");
exports.viewport = function (Comp, _a) {
    var _b = (_a === void 0 ? {} : _a).placeholder, placeholder = _b === void 0 ? pixel_1.pixel : _b;
    var flipped = false;
    var Viewport = (function (_super) {
        tslib_1.__extends(Viewport, _super);
        function Viewport() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.onChange = function () {
                flipped = true;
                _this.forceUpdate();
            };
            return _this;
        }
        Viewport.prototype.render = function () {
            return flipped ?
                util_1.h(Comp, this.props) :
                util_1.h(ViewportSensor_1.ViewportSensor, { onChange: this.onChange }, placeholder);
        };
        return Viewport;
    }(React.Component));
    return Viewport;
};
//# sourceMappingURL=viewport.js.map