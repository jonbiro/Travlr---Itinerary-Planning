export const observable = state => {
    let listeners = [];
    let currentState = state;
    const get = () => currentState;
    const set = state => {
        currentState = state;
        for (const listener of listeners)
            listener(currentState);
    };
    const sub = listener => {
        listeners.push(listener);
        return () => (listeners = listeners.filter(item => item !== listener));
    };
    return {
        get,
        set,
        sub,
    };
};
