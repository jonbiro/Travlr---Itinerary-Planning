{"ast":null,"code":"import _classCallCheck from \"/Users/yoni/Development/travlrbackend2/travlr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yoni/Development/travlrbackend2/travlr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yoni/Development/travlrbackend2/travlr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yoni/Development/travlrbackend2/travlr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yoni/Development/travlrbackend2/travlr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/yoni/Development/travlrbackend2/travlr/src/BestComponents/CityItinerary.js\";\nimport React, { Component } from \"react\";\nimport { ROOT_URL } from \"../Config\";\n\nvar CityItinerary =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CityItinerary, _Component);\n\n  function CityItinerary() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CityItinerary);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CityItinerary)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      places: [],\n      showDelete: _this.props.showDelete,\n      placeToDelete: {}\n    };\n\n    _this.fetchPlaces = function () {\n      var getpath = window.location.pathname.split(\"/\");\n      var id = parseInt(getpath.slice(getpath.length - 1));\n      fetch(\"\".concat(ROOT_URL, \"/cities/\").concat(id), {\n        method: \"GET\",\n        headers: {\n          // Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \".concat(localStorage.getItem(\"accessToken\"))\n        }\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        _this.setState({\n          places: res.places\n        });\n      });\n    };\n\n    _this.showButton = function (place) {\n      _this.props.deleteButton();\n\n      _this.setState({\n        placeToDelete: place\n      });\n    };\n\n    _this.deleteButton = function () {\n      return React.createElement(React.Fragment, null, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this.props.deletePlace(_this.state.placeToDelete);\n        },\n        className: \"navitem\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, \"Delete\"));\n    };\n\n    _this.placesMapped = function () {\n      if (_this.props.places.length > 0) {\n        return _this.props.places.map(function (place) {\n          return React.createElement(\"li\", {\n            key: place.id,\n            onClick: function onClick() {\n              return _this.showButton(place);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }, place.name);\n        });\n      } else {\n        _this.fetchPlaces();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(CityItinerary, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchPlaces();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      // console.log(this.state)\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"mediumh1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Itinerary:\"), this.props.places.length === 0 ? null : this.placesMapped(), this.props.showDelete ? this.deleteButton() : null);\n    }\n  }]);\n\n  return CityItinerary;\n}(Component);\n\nexport default CityItinerary;","map":{"version":3,"sources":["/Users/yoni/Development/travlrbackend2/travlr/src/BestComponents/CityItinerary.js"],"names":["React","Component","ROOT_URL","CityItinerary","state","places","showDelete","props","placeToDelete","fetchPlaces","getpath","window","location","pathname","split","id","parseInt","slice","length","fetch","method","headers","Authorization","localStorage","getItem","then","res","json","setState","showButton","place","deleteButton","deletePlace","placesMapped","map","name"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,QAAT,QAAyB,WAAzB;;IAEMC,a;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,MAAM,EAAE,EADF;AAENC,MAAAA,UAAU,EAAE,MAAKC,KAAL,CAAWD,UAFjB;AAGPE,MAAAA,aAAa,EAAE;AAHR,K;;UAURC,W,GAAc,YAAM;AAClB,UAAIC,OAAO,GAAGC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,CAAyBC,KAAzB,CAA+B,GAA/B,CAAd;AACA,UAAIC,EAAE,GAAGC,QAAQ,CAACN,OAAO,CAACO,KAAR,CAAcP,OAAO,CAACQ,MAAR,GAAiB,CAA/B,CAAD,CAAjB;AACAC,MAAAA,KAAK,WAAIjB,QAAJ,qBAAuBa,EAAvB,GAA6B;AAChCK,QAAAA,MAAM,EAAE,KADwB;AAEhCC,QAAAA,OAAO,EAAE;AACP;AACA,0BAAgB,kBAFT;AAGPC,UAAAA,aAAa,mBAAYC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAZ;AAHN;AAFuB,OAA7B,CAAL,CAQGC,IARH,CAQQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OARX,EASGF,IATH,CASQ,UAAAC,GAAG,EAAI;AACX,cAAKE,QAAL,CAAc;AACZvB,UAAAA,MAAM,EAAEqB,GAAG,CAACrB;AADA,SAAd;AAGD,OAbH;AAcD,K;;UACDwB,U,GAAa,UAACC,KAAD,EAAW;AACvB,YAAKvB,KAAL,CAAWwB,YAAX;;AACC,YAAKH,QAAL,CAAc;AAAGpB,QAAAA,aAAa,EAAEsB;AAAlB,OAAd;AACD,K;;UACDC,Y,GAAe,YAAM;AACnB,aACE,0CACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAEE;AAAQ,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAKxB,KAAL,CAAWyB,WAAX,CAAuB,MAAK5B,KAAL,CAAWI,aAAlC,CAAN;AAAA,SAAjB;AAAyE,QAAA,SAAS,EAAC,SAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,CADF;AAQD,K;;UAODyB,Y,GAAe,YAAM;AACnB,UAAI,MAAK1B,KAAL,CAAWF,MAAX,CAAkBa,MAAlB,GAA2B,CAA/B,EAAkC;AAChC,eAAO,MAAKX,KAAL,CAAWF,MAAX,CAAkB6B,GAAlB,CAAsB,UAAAJ,KAAK,EAAI;AACpC,iBACE;AAAI,YAAA,GAAG,EAAEA,KAAK,CAACf,EAAf;AAAmB,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAKc,UAAL,CAAgBC,KAAhB,CAAN;AAAA,aAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACGA,KAAK,CAACK,IADT,CADF;AAKD,SANM,CAAP;AAOD,OARD,MAQO;AACL,cAAK1B,WAAL;AACD;AACF,K;;;;;;;wCAtDmB;AAClB,WAAKA,WAAL;AACD;;;6BAsDQ;AACP;AACA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,UAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,EAIG,KAAKF,KAAL,CAAWF,MAAX,CAAkBa,MAAlB,KAA6B,CAA7B,GAAiC,IAAjC,GAAwC,KAAKe,YAAL,EAJ3C,EAKG,KAAK1B,KAAL,CAAWD,UAAX,GAAwB,KAAKyB,YAAL,EAAxB,GAA8C,IALjD,CADF;AASD;;;;EA1EyB9B,S;;AA6E5B,eAAeE,aAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { ROOT_URL } from \"../Config\";\n\nclass CityItinerary extends Component {\n  state = {\n    places: [],\n    showDelete: this.props.showDelete,\n\t  placeToDelete: {}\n  };\n\n  componentDidMount() {\n    this.fetchPlaces();\n  }\n\n  fetchPlaces = () => {\n    let getpath = window.location.pathname.split(\"/\");\n    let id = parseInt(getpath.slice(getpath.length - 1));\n    fetch(`${ROOT_URL}/cities/${id}`, {\n      method: \"GET\",\n      headers: {\n        // Accept: \"application/json\",\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${localStorage.getItem(\"accessToken\")}`\n      }\n    })\n      .then(res => res.json())\n      .then(res => {\n        this.setState({\n          places: res.places\n        });\n      });\n  };\n  showButton = (place) => {\n  \tthis.props.deleteButton()\n    this.setState({  placeToDelete: place });\n  };\n  deleteButton = () => {\n    return (\n      <>\n        <br />\n        <button onClick={() => this.props.deletePlace(this.state.placeToDelete)} className=\"navitem\">\n          Delete\n        </button>\n      </>\n    );\n  };\n  \n\t//     }}).then(console.log).then(() =>this.setState({\n\t//     showDelete: !this.state.showDelete, placeToDelete: {}, places: deletedObjFilter\n  //   }))\n  // };\n  \n  placesMapped = () => {\n    if (this.props.places.length > 0) {\n      return this.props.places.map(place => {\n        return (\n          <li key={place.id} onClick={() => this.showButton(place)}>\n            {place.name}\n          </li>\n        );\n      });\n    } else {\n      this.fetchPlaces();\n    }\n  };\n\n  render() {\n    // console.log(this.state)\n    return (\n      <div>\n        <h1 className='mediumh1'>Itinerary:</h1>\n\n        {/*{console.log(this.state.places)}*/}\n        {this.props.places.length === 0 ? null : this.placesMapped()}\n        {this.props.showDelete ? this.deleteButton() : null}\n      </div>\n    );\n  }\n}\n\nexport default CityItinerary;\n"]},"metadata":{},"sourceType":"module"}