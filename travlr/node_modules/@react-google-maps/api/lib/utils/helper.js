/* eslint-disable filenames/match-regex */
/* global google */
import { reduce } from './reduce';
import { forEach } from './foreach';
var applyUpdaterToNextProps = function (updaterMap, prevProps, nextProps, instance) {
    var map = {};
    var iter = function (fn, key) {
        var nextValue = nextProps[key];
        if (nextValue !== prevProps[key]) {
            map[key] = nextValue;
            fn(instance, nextValue);
        }
    };
    forEach(updaterMap, iter);
    return map;
};
export function registerEvents(props, instance, eventMap) {
    var registeredList = reduce(eventMap, function (acc, googleEventName, onEventName) {
        if (typeof props[onEventName] === 'function') {
            acc.push(google.maps.event.addListener(instance, googleEventName, props[onEventName]));
        }
        return acc;
    }, []);
    return registeredList;
}
export function unregisterEvents(events) {
    if (events === void 0) { events = []; }
    events.map(unregisterEvent);
}
function unregisterEvent(registered) {
    google.maps.event.removeListener(registered);
}
export function applyUpdatersToPropsAndRegisterEvents(_a) {
    var updaterMap = _a.updaterMap, eventMap = _a.eventMap, prevProps = _a.prevProps, nextProps = _a.nextProps, instance = _a.instance;
    applyUpdaterToNextProps(updaterMap, prevProps, nextProps, instance);
    return registerEvents(nextProps, instance, eventMap);
}
//# sourceMappingURL=helper.js.map